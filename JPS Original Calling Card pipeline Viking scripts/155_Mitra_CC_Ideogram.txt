#!/bin/bash
#SBATCH --job-name=Annotateinsert	 # Job name
#SBATCH --mail-type=END,FAIL             # Mail events (NONE, BEGIN, END, FAIL, ALL)
#SBATCH --mail-user=jps558@york.ac.uk    # Where to send mail  
#SBATCH --ntasks=2                       # Run on a single CPU
#SBATCH --mem=100gb                      # Job memory request
#SBATCH --time=12:00:00                  # Time limit hrs:min:sec
#SBATCH --output=basic_job_%j.log        # Standard output and error log
#SBATCH --account=biol-hic-2020          # Project account

module load bio/SAMtools/1.9-foss-2018b
module load bio/BEDTools/2.30.0-GCC-11.2.0
module load lang/Miniconda3
source activate Callingcardspy

cd workingCCdata/HCT-116
for dile in *HCT-116_HyPBase.*_sorted.qbed; do
	echo "processing "$dile""
	python ../../CCFIdeogram.py \
	"$dile" \
	"$dile".blocks \
	../../processedCCdata/20230713_ccfprocess/HCT-116/"$dile".bedgraph
	done
for qile in *HCT-116_SP1-HyPBase*_sorted.qbed; do
	echo "processing "$qile""
	python ../../CCFIdeogram.py \
	"$qile" \
	"$qile".blocks \
	../../processedCCdata/20230713_ccfprocess/HCT-116/"$qile".bedgraph
	done


cd ../../workingCCdata/OCM1A
for mile in *OCM1A-HyPBase.*_sorted.qbed; do
	echo "processing "$mile""
	python ../../CCFIdeogram.py \
	"$mile" \
	"$mile".blocks \
	/mnt/lustre/groups/biol-hic-2020/jack/processedCCdata/20230713_ccfprocess/OCM1A/"$mile".bedgraph
	done
for sile in *OCM1A-BAP1-HyPBase*_sorted.qbed; do
	echo "processing "$sile""
	python ../../CCFIdeogram.py \
	"$sile" \
	"$sile".blocks \
	/mnt/lustre/groups/biol-hic-2020/jack/processedCCdata/20230713_ccfprocess/OCM1A/"$sile".bedgraph
	done
